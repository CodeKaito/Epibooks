{"ast":null,"code":"var _jsxFileName = \"/Users/kaito/Documents/GitHub/Epibooks/src/components/MainContent/LatestReleases/CommentArea.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { SelectedContext } from \"../../../context/SelectedContext\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport \"../LatestReleases/style/commentArea.css\";\nimport AddComment from \"./AddComment\";\nimport CommentList from \"./CommentList\";\nimport { useLocation } from \"react-router-dom\";\nimport { nanoid } from \"nanoid\";\nimport useFetchComments from \"../../../hooks/useFetchComments\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CommentArea = () => {\n  _s();\n  const location = useLocation();\n  const isBookDetailsPage = location.pathname.includes(\"/book/\");\n  const {\n    selected\n  } = useContext(SelectedContext);\n  const [bookComments, setBookComments] = useState(null);\n  const getCommentsFromApi = async () => {\n    try {\n      const data = await fetch(`https://striveschool-api.herokuapp.com/api/comments/${selected.asin}`, {\n        headers: {\n          Authorization: \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDkxZjA2YzUwYTMzNjAwMTQ5NWJlY2YiLCJpYXQiOjE2ODcyODU4NjksImV4cCI6MTY4ODQ5NTQ2OX0.tQxXmhliai0kCiHPaCNudJi0oOEF-fL-TGw2xoU6nu0\"\n        }\n      });\n      const response = await data.json();\n      setBookComments(response);\n    } catch (error) {\n      console.log(\"error\", error);\n    }\n  };\n  useEffect(() => {\n    if (selected.asin || isBookDetailsPage && selected.asin) {\n      getCommentsFromApi();\n    }\n  }, [selected.asin, isBookDetailsPage]);\n  const handleDeleteComment = () => {\n    getCommentsFromApi();\n  };\n  const handleAddNewComment = () => {\n    getCommentsFromApi();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!selected.asin && !isBookDetailsPage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"grow\",\n        className: \"d-flex justify-content-center mx-auto align-items-center mt-5\"\n      }, nanoid(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"d-flex justify-content-center mx-auto align-items-center mt-3\",\n        children: \"Click on a book to load contents...\"\n      }, nanoid(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : null, selected.asin || isBookDetailsPage ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column justify-content-center align-items-start m-0 p-0 commentArea\",\n      children: [isBookDetailsPage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-5 align-self-center\",\n          children: \"Reviews:\"\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Comments for:\"\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-5\",\n          children: selected.title\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), bookComments && bookComments.length > 0 ? bookComments.map(comment => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(CommentList, {\n          comment: comment,\n          title: comment.title,\n          handleDeleteComment: handleDeleteComment,\n          getCommentsFromApi: getCommentsFromApi\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this)\n      }, void 0, false)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"d-flex justify-content-center align-items-center mx-auto p-0 m-0\",\n        children: \"No comments here yet \\uD83D\\uDE1F Be the first one!\"\n      }, nanoid(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(AddComment, {\n        title: selected.title,\n        asin: selected.asin,\n        handleAddNewComment: handleAddNewComment\n      }, nanoid(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this)]\n    }, nanoid(), true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n};\n_s(CommentArea, \"pmHC5L3jXaKmQ0YRypH3gVk9QRc=\", false, function () {\n  return [useLocation];\n});\n_c = CommentArea;\nexport default CommentArea;\nvar _c;\n$RefreshReg$(_c, \"CommentArea\");","map":{"version":3,"names":["React","useContext","useState","useEffect","SelectedContext","Spinner","AddComment","CommentList","useLocation","nanoid","useFetchComments","jsxDEV","_jsxDEV","Fragment","_Fragment","CommentArea","_s","location","isBookDetailsPage","pathname","includes","selected","bookComments","setBookComments","getCommentsFromApi","data","fetch","asin","headers","Authorization","response","json","error","console","log","handleDeleteComment","handleAddNewComment","children","animation","className","fileName","_jsxFileName","lineNumber","columnNumber","title","length","map","comment","_c","$RefreshReg$"],"sources":["/Users/kaito/Documents/GitHub/Epibooks/src/components/MainContent/LatestReleases/CommentArea.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\n\r\nimport { SelectedContext } from \"../../../context/SelectedContext\";\r\n\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\n\r\nimport \"../LatestReleases/style/commentArea.css\";\r\n\r\nimport AddComment from \"./AddComment\";\r\nimport CommentList from \"./CommentList\";\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport { nanoid } from \"nanoid\";\r\nimport useFetchComments from \"../../../hooks/useFetchComments\";\r\n\r\nconst CommentArea = () => {\r\n  const location = useLocation();\r\n\r\n  const isBookDetailsPage = location.pathname.includes(\"/book/\");\r\n\r\n  const { selected } = useContext(SelectedContext);\r\n\r\n  const [bookComments, setBookComments] = useState(null);\r\n\r\n  const getCommentsFromApi = async () => {\r\n    try {\r\n      const data = await fetch(\r\n        `https://striveschool-api.herokuapp.com/api/comments/${selected.asin}`,\r\n        {\r\n          headers: {\r\n            Authorization:\r\n            \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDkxZjA2YzUwYTMzNjAwMTQ5NWJlY2YiLCJpYXQiOjE2ODcyODU4NjksImV4cCI6MTY4ODQ5NTQ2OX0.tQxXmhliai0kCiHPaCNudJi0oOEF-fL-TGw2xoU6nu0\",\r\n          }\r\n        }\r\n      );\r\n      const response = await data.json();\r\n      setBookComments(response);\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selected.asin || (isBookDetailsPage && selected.asin)) {\r\n      getCommentsFromApi();\r\n    }\r\n  }, [selected.asin, isBookDetailsPage]);\r\n\r\n  const handleDeleteComment = () => {\r\n    getCommentsFromApi();\r\n  };\r\n\r\n  const handleAddNewComment = () => {\r\n    getCommentsFromApi();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!selected.asin && !isBookDetailsPage ? (\r\n        <>\r\n          <Spinner\r\n            animation=\"grow\"\r\n            key={nanoid()}\r\n            className=\"d-flex justify-content-center mx-auto align-items-center mt-5\"\r\n          />\r\n          <p\r\n            key={nanoid()}\r\n            className=\"d-flex justify-content-center mx-auto align-items-center mt-3\"\r\n          >\r\n            Click on a book to load contents...\r\n          </p>\r\n        </>\r\n      ) : null}\r\n\r\n      {selected.asin || isBookDetailsPage ? (\r\n        <div\r\n          className=\"d-flex flex-column justify-content-center align-items-start m-0 p-0 commentArea\"\r\n          key={nanoid()}\r\n        >\r\n          {isBookDetailsPage ? (\r\n            <>\r\n              <h3 key={nanoid()} className=\"mb-5 align-self-center\">\r\n                Reviews:\r\n              </h3>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <h3 key={nanoid()}>Comments for:</h3>\r\n              <h5 key={nanoid()} className=\"mb-5\">\r\n                {selected.title}\r\n              </h5>\r\n            </>\r\n          )}\r\n\r\n          {bookComments && bookComments.length > 0 ? (\r\n            bookComments.map((comment) => (\r\n              <>\r\n                <CommentList\r\n                  comment={comment}\r\n                  title={comment.title}\r\n                  key={nanoid()}\r\n                  handleDeleteComment={handleDeleteComment}\r\n                  getCommentsFromApi={getCommentsFromApi}\r\n                />\r\n              </>\r\n            ))\r\n          ) : (\r\n            <p\r\n              className=\"d-flex justify-content-center align-items-center mx-auto p-0 m-0\"\r\n              key={nanoid()}\r\n            >\r\n              No comments here yet ðŸ˜Ÿ Be the first one!\r\n            </p>\r\n          )}\r\n\r\n          <AddComment\r\n            title={selected.title}\r\n            asin={selected.asin}\r\n            handleAddNewComment={handleAddNewComment}\r\n            key={nanoid()}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CommentArea;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}